<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kézilabda Statisztika – Kompakt</title>
<link rel="manifest" href="manifest.webmanifest">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<meta name="theme-color" content="#1976d2">
<style>
body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
header { background: #1976d2; color: white; padding: 5px; text-align: center; font-size: 16px; }
table { width: 100%; border-collapse: collapse; font-size: 12px; }
th, td { border: 1px solid #ccc; padding: 2px; text-align: center; }
input[type="text"], input[type="number"] { font-size: 11px; padding: 2px; width: 100%; box-sizing: border-box; }
button { font-size: 11px; padding: 2px 4px; margin: 1px; }
.controls { display: flex; flex-wrap: wrap; justify-content: center; gap: 4px; padding: 4px; }
.player-name { width: 90px; }
.small-btn { font-size: 10px; padding: 1px 3px; }
</style>
</head>
<body>
<header>Kézilabda Statisztika – Kompakt nézet</header>

<div class="controls">
    <button onclick="fillTemplate()">Sablon 1–16</button>
    <button onclick="resetStats()">Nullázás</button>
</div>

<table id="statsTable">
<thead>
<tr>
    <th>#</th>
    <th>Név</th>
    <th>G+</th>
    <th>V+</th>
    <th>7G+</th>
    <th>7K+</th>
    <th>Lövések</th>
    <th>Gól</th>
    <th>%</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script>
let players = JSON.parse(localStorage.getItem('players')) || Array(16).fill().map(() => ({
    number: '', name: '', shots: 0, goals: 0
}));

function savePlayers() {
    localStorage.setItem('players', JSON.stringify(players));
}

function updateTable() {
    const tbody = document.querySelector('#statsTable tbody');
    tbody.innerHTML = '';
    players.forEach((p, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><input type="number" value="${p.number}" onchange="players[${i}].number=this.value;savePlayers()"></td>
            <td><input class="player-name" type="text" value="${p.name}" onchange="players[${i}].name=this.value;savePlayers()"></td>
            <td><button class="small-btn" onclick="addGoal(${i})">+</button></td>
            <td><button class="small-btn" onclick="addMiss(${i})">+</button></td>
            <td><button class="small-btn" onclick="add7mGoal(${i})">+</button></td>
            <td><button class="small-btn" onclick="add7mMiss(${i})">+</button></td>
            <td>${p.shots}</td>
            <td>${p.goals}</td>
            <td>${p.shots ? Math.round((p.goals/p.shots)*100) : 0}%</td>
        `;
        tbody.appendChild(tr);
    });
}

function addGoal(i) { players[i].shots++; players[i].goals++; savePlayers(); updateTable(); }
function addMiss(i) { players[i].shots++; savePlayers(); updateTable(); }
function add7mGoal(i) { players[i].shots++; players[i].goals++; savePlayers(); updateTable(); }
function add7mMiss(i) { players[i].shots++; savePlayers(); updateTable(); }

function fillTemplate() {
    players.forEach((p, i) => { p.number = i+1; p.name = `Játékos ${i+1}`; p.shots = 0; p.goals = 0; });
    savePlayers(); updateTable();
}

function resetStats() {
    players.forEach(p => { p.shots = 0; p.goals = 0; });
    savePlayers(); updateTable();
}

updateTable();
</script>
</body>
</html>
